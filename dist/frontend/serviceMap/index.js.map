{"version":3,"sources":["../../../src/frontend/serviceMap/index.ts"],"names":["ServiceMap","envMap","Object","keys","length","Error","window","KOJI_OVERRIDES","overrides","serviceMap","services"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;;AAGA;AACA;AACA;IACaA,U;;;uDAEiB,E;;;;;;AAE5B;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;6BAC6C;AAAA,UAA7BC,MAA6B,uEAAV,EAAU;AACzC,UAAIC,MAAM,CAACC,IAAP,CAAYF,MAAZ,EAAoBG,MAApB,KAA+B,CAAnC,EAAsC,MAAM,IAAIC,KAAJ,CAAU,+BAAV,CAAN,CADG,CAGzC;;AACA,UAAIC,MAAM,CAACC,cAAX,EAA2B;AAAA,oCACED,MAAM,CAACC,cADT,CACjBC,SADiB;AAAA,YACjBA,SADiB,sCACL,EADK;;AAEzB,YAAIA,SAAS,IAAIA,SAAS,CAACC,UAA3B,EAAuC;AACrC,eAAKC,QAAL,mCACKT,MADL,GAEKO,SAAS,CAACC,UAFf;AAIA;AACD;AACF,OAbwC,CAezC;;;AACA,WAAKC,QAAL,qBAAqBT,MAArB;AACD;;;;;;AAGI,IAAMQ,UAAU,GAAG,IAAIT,UAAJ,EAAnB","sourcesContent":["/** Key-value pairs of services and endpoints. */\nexport type Services = { [key: string]: string; };\n\n/**\n * Manages endpoints for the services running in your Koji app.\n */\nexport class ServiceMap {\n  /** Key-value pairs of services and endpoints. */\n  public services: Services = {};\n\n  /**\n   * Sets the environment variables for the available services in the Koji app. This method automatically scopes the variables for the customized version of the Koji app.\n   *\n   * @param   envMap Key-value pairs of services and endpoints in the original Koji.\n   *\n   * @example\n   * ```javascript\n   * Koji.serviceMap.config({\n   *  frontend: process.env.KOJI_SERVICE_URL_frontend\n   * });\n   * ```\n   */\n  public config(envMap: Services = {}): void {\n    if (Object.keys(envMap).length === 0) throw new Error('Please add some base services');\n\n    // Handle overrides\n    if (window.KOJI_OVERRIDES) {\n      const { overrides = {} } = window.KOJI_OVERRIDES;\n      if (overrides && overrides.serviceMap) {\n        this.services = {\n          ...envMap,\n          ...overrides.serviceMap,\n        };\n        return;\n      }\n    }\n\n    // If no overrides, return the original map\n    this.services = { ...envMap };\n  }\n}\n\nexport const serviceMap = new ServiceMap();\n"],"file":"index.js"}