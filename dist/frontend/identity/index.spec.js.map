{"version":3,"sources":["../../../src/frontend/identity/index.spec.ts"],"names":["mockMessage","message","window","setTimeout","postMessage","describe","USER_TOKEN","it","event","token","identity","getToken","userToken","expect","toBe"],"mappings":";;;;;;;;AAIA;;AAJA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA,SAASA,WAAT,CAAqBC,OAArB,EAA8B;AAC5BC,EAAAA,MAAM,CAACC,UAAP,CAAkB,YAAM;AACtBD,IAAAA,MAAM,CAACE,WAAP,CAAmBH,OAAnB,EAA4B,GAA5B;AACD,GAFD,EAEG,CAFH;AAGD;;AAEDI,QAAQ,CAAC,mBAAD,EAAsB,YAAM;AAClC,MAAMC,UAAU,GAAG,eAAnB;AAEAC,EAAAA,EAAE,CAAC,sBAAD,6FAAyB;AAAA;AAAA;AAAA;AAAA;AAAA;AACzBP,YAAAA,WAAW,CAAC;AACVQ,cAAAA,KAAK,EAAE,uBADG;AAEVC,cAAAA,KAAK,EAAEH;AAFG,aAAD,CAAX;AADyB;AAAA,mBAMDI,gBAASC,QAAT,EANC;;AAAA;AAMnBC,YAAAA,SANmB;AAQzBC,YAAAA,MAAM,CAACD,SAAD,CAAN,CAAkBE,IAAlB,CAAuBR,UAAvB;;AARyB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAzB,GAAF;AAUD,CAbO,CAAR","sourcesContent":["/**\n * @jest-environment jsdom\n */\n\nimport { identity } from './index';\n\n// @ts-ignore\n//\n// Need to set a timeout so that we can await the return value from\n// a listener.\nfunction mockMessage(message) {\n  window.setTimeout(() => {\n    window.postMessage(message, '*');\n  }, 0);\n}\n\ndescribe('frontend/identify', () => {\n  const USER_TOKEN = 'testUserToken';\n\n  it('returns a user token', async () => {\n    mockMessage({\n      event: 'KojiAuth.TokenCreated',\n      token: USER_TOKEN,\n    });\n\n    const userToken = await identity.getToken();\n\n    expect(userToken).toBe(USER_TOKEN);\n  });\n});\n"],"file":"index.spec.js"}